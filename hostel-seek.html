<!DOCTYPE html>
<html lang="en" class="antialiased">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Basha | Premium Living</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts: Plus Jakarta Sans (Premium, Geometric, Unique) -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&display=swap"
      rel="stylesheet"
    />

    <!-- Icons (Lucide) -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <script>
      tailwind.config = {
        theme: {
          extend: {
            fontFamily: {
              sans: ["Plus Jakarta Sans", "sans-serif"],
            },
            colors: {
              mac: {
                bg: "#F5F5F7", // Apple System Gray 6
                sidebar: "#FBFBFD", // Apple Sidebar
                card: "#FFFFFF",
                text: "#1D1D1F",
                secondary: "#86868B",
                accent: "#0071E3", // Apple Blue
                divider: "#E5E5EA",
                success: "#34C759",
                danger: "#FF3B30",
                warning: "#FF9500",
              },
            },
            boxShadow: {
              soft: "0 8px 30px rgba(0,0,0,0.04)",
              float: "0 20px 40px rgba(0,0,0,0.08)",
              glass: "0 4px 30px rgba(0, 0, 0, 0.1)",
            },
            backgroundImage: {
              "gradient-mesh":
                "radial-gradient(at 0% 0%, rgba(0, 113, 227, 0.03) 0px, transparent 50%), radial-gradient(at 100% 0%, rgba(255, 59, 48, 0.03) 0px, transparent 50%)",
            },
          },
        },
      };
    </script>

    <style>
      /* Hide scrollbars but keep functionality */
      .no-scrollbar::-webkit-scrollbar {
        display: none;
      }
      .no-scrollbar {
        -ms-overflow-style: none;
        scrollbar-width: none;
      }

      body {
        background-color: #f5f5f7;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }

      /* Glassmorphism Utilities */
      .glass {
        background: rgba(255, 255, 255, 0.75);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.6);
      }

      .glass-dark {
        background: rgba(29, 29, 31, 0.85);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        color: white;
      }

      .glass-sidebar {
        background: rgba(251, 251, 253, 0.8);
        backdrop-filter: blur(25px);
        border-right: 1px solid rgba(0, 0, 0, 0.05);
      }

      /* Animation Utilities */
      .tap-active:active {
        transform: scale(0.96);
        transition: transform 0.1s cubic-bezier(0.4, 0, 0.2, 1);
      }
      .tap-active {
        transition: transform 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .fade-in-up {
        animation: fadeInUp 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
        opacity: 0;
        transform: translateY(20px);
      }

      @keyframes fadeInUp {
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Leaflet/Map mimic */
      .map-texture {
        background-image: url("https://upload.wikimedia.org/wikipedia/commons/e/ec/World_map_blank_without_borders.svg");
        background-size: cover;
        opacity: 0.1;
      }
    </style>
  </head>
  <body
    class="text-mac-text h-screen overflow-hidden flex selection:bg-mac-accent selection:text-white"
  >
    <!-- DESKTOP: Sidebar (Hidden on Mobile) -->
    <aside
      class="hidden md:flex flex-col w-72 h-full glass-sidebar pt-8 pb-6 px-4 z-50 justify-between shrink-0"
    >
      <div>
        <!-- Brand -->
        <div class="flex items-center gap-3 px-4 mb-10">
          <div
            class="w-10 h-10 bg-gradient-to-br from-mac-accent to-blue-600 rounded-xl flex items-center justify-center shadow-lg shadow-blue-500/20 text-white"
          >
            <i data-lucide="home" class="w-6 h-6 stroke-[2.5]"></i>
          </div>
          <span class="text-2xl font-bold tracking-tight text-gray-900"
            >Basha</span
          >
        </div>

        <!-- Navigation -->
        <nav class="space-y-1">
          <p
            class="px-4 text-xs font-semibold text-gray-400 uppercase tracking-wider mb-2"
          >
            Browse
          </p>
          <a
            href="#"
            class="flex items-center gap-3 px-4 py-3 rounded-xl bg-white shadow-soft text-mac-accent font-semibold transition-all"
          >
            <i data-lucide="compass" class="w-5 h-5"></i> Explore
          </a>
          <a
            href="#"
            class="flex items-center gap-3 px-4 py-3 rounded-xl text-gray-500 hover:bg-gray-100/50 hover:text-gray-900 transition-all"
          >
            <i data-lucide="map" class="w-5 h-5"></i> Map View
          </a>
          <a
            href="#"
            class="flex items-center gap-3 px-4 py-3 rounded-xl text-gray-500 hover:bg-gray-100/50 hover:text-gray-900 transition-all"
          >
            <i data-lucide="heart" class="w-5 h-5"></i> Saved
          </a>

          <p
            class="px-4 text-xs font-semibold text-gray-400 uppercase tracking-wider mt-8 mb-2"
          >
            Account
          </p>
          <a
            href="#"
            class="flex items-center gap-3 px-4 py-3 rounded-xl text-gray-500 hover:bg-gray-100/50 hover:text-gray-900 transition-all"
          >
            <i data-lucide="message-square" class="w-5 h-5"></i> Messages
            <span
              class="ml-auto bg-mac-danger text-white text-[10px] font-bold px-1.5 py-0.5 rounded-full"
              >2</span
            >
          </a>
          <a
            href="#"
            class="flex items-center gap-3 px-4 py-3 rounded-xl text-gray-500 hover:bg-gray-100/50 hover:text-gray-900 transition-all"
          >
            <i data-lucide="settings" class="w-5 h-5"></i> Settings
          </a>
        </nav>
      </div>

      <!-- User Profile (Sidebar Footer) -->
      <div
        class="flex items-center gap-3 px-4 py-3 mt-auto bg-white/50 rounded-2xl border border-white/50 backdrop-blur-sm cursor-pointer hover:bg-white transition-colors"
      >
        <img
          src="https://images.unsplash.com/photo-1633332755192-727a05c4013d?w=100&auto=format&fit=crop&q=60"
          class="w-10 h-10 rounded-full border-2 border-white shadow-sm"
          alt="User"
        />
        <div class="flex-1 min-w-0">
          <p class="text-sm font-bold text-gray-900 truncate">Ishtiaq Ahmed</p>
          <p class="text-xs text-gray-500 truncate">Premium Member</p>
        </div>
        <i data-lucide="chevron-right" class="w-4 h-4 text-gray-400"></i>
      </div>
    </aside>

    <!-- MAIN CONTENT AREA -->
    <main
      class="flex-1 h-full overflow-y-auto relative bg-mac-bg bg-gradient-mesh no-scrollbar scroll-smooth"
      id="main-scroll"
    >
      <!-- Mobile Header (Hidden on Desktop) -->
      <header
        class="md:hidden sticky top-0 z-40 glass border-b border-gray-200/30 px-5 py-4 flex justify-between items-center"
      >
        <div class="flex items-center gap-2">
          <div
            class="w-8 h-8 bg-mac-accent rounded-lg flex items-center justify-center text-white"
          >
            <i data-lucide="home" class="w-5 h-5"></i>
          </div>
          <h1 class="text-xl font-bold tracking-tight">Basha</h1>
        </div>
        <button
          class="w-9 h-9 rounded-full bg-gray-200 overflow-hidden border border-gray-300"
        >
          <img
            src="https://images.unsplash.com/photo-1633332755192-727a05c4013d?w=100&auto=format&fit=crop&q=60"
            class="w-full h-full object-cover"
          />
        </button>
      </header>

      <!-- Content Container -->
      <div class="max-w-6xl mx-auto px-5 md:px-10 py-6 md:py-10 pb-32">
        <!-- Welcome & Search Block -->
        <div
          class="flex flex-col md:flex-row md:items-center justify-between gap-6 mb-10 fade-in-up"
          style="animation-delay: 0ms;"
        >
          <div>
            <h1
              class="text-3xl md:text-4xl font-extrabold text-gray-900 tracking-tight mb-2"
            >
              Find your <span class="text-mac-accent">Sanctuary</span>
            </h1>
            <p class="text-mac-secondary text-base md:text-lg">
              Premium living spaces in Dhaka.
            </p>
          </div>

          <!-- Desktop Search Bar -->
          <div class="hidden md:flex relative group w-96">
            <div
              class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"
            >
              <i data-lucide="search" class="w-5 h-5 text-gray-400"></i>
            </div>
            <input
              type="text"
              class="block w-full pl-11 pr-4 py-3.5 border-none rounded-2xl bg-white shadow-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-4 focus:ring-mac-accent/10 transition-all hover:shadow-md"
              placeholder="Search area, city, or property..."
            />
            <button
              class="absolute inset-y-1.5 right-1.5 p-2 bg-mac-bg rounded-xl hover:bg-gray-200 transition"
            >
              <i
                data-lucide="sliders-horizontal"
                class="w-4 h-4 text-gray-600"
              ></i>
            </button>
          </div>
        </div>

        <!-- Mobile Search (Visible only on mobile) -->
        <div class="md:hidden mb-8 fade-in-up" style="animation-delay: 50ms;">
          <div class="relative group tap-active">
            <input
              type="text"
              class="block w-full pl-11 pr-4 py-3.5 border-none rounded-2xl bg-white/80 backdrop-blur shadow-sm text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-mac-accent/50"
              placeholder="Search locations..."
            />
            <div
              class="absolute inset-y-0 left-0 pl-3.5 flex items-center pointer-events-none"
            >
              <i data-lucide="search" class="w-5 h-5 text-gray-400"></i>
            </div>
            <button
              class="absolute inset-y-2 right-2 p-1.5 bg-white rounded-lg shadow-sm"
            >
              <i
                data-lucide="sliders-horizontal"
                class="w-4 h-4 text-gray-600"
              ></i>
            </button>
          </div>
        </div>

        <!-- Category Pills -->
        <div
          class="flex gap-4 overflow-x-auto no-scrollbar mb-8 fade-in-up pl-1"
          style="animation-delay: 100ms;"
          id="categories-container"
        >
          <!-- JS Populated -->
        </div>

        <!-- Featured Section -->
        <div class="mb-10 fade-in-up" style="animation-delay: 150ms;">
          <div class="flex items-center justify-between mb-5">
            <h2 class="text-xl md:text-2xl font-bold text-gray-900">
              Featured Collections
            </h2>
            <div class="flex gap-2">
              <button
                class="w-8 h-8 rounded-full border border-gray-200 flex items-center justify-center hover:bg-white transition bg-white/50"
              >
                <i data-lucide="chevron-left" class="w-4 h-4"></i>
              </button>
              <button
                class="w-8 h-8 rounded-full border border-gray-200 flex items-center justify-center hover:bg-white transition bg-white/50"
              >
                <i data-lucide="chevron-right" class="w-4 h-4"></i>
              </button>
            </div>
          </div>

          <!-- Horizontal Scroll Snap -->
          <div class="flex overflow-x-auto gap-6 no-scrollbar snap-x px-1 pb-4">
            <!-- Featured Card 1 -->
            <div
              class="min-w-[85%] md:min-w-[500px] snap-center relative group cursor-pointer tap-active"
              onclick="openModal(1)"
            >
              <div
                class="aspect-[16/9] rounded-[2rem] overflow-hidden shadow-soft group-hover:shadow-float transition-all duration-500 relative bg-gray-200"
              >
                <img
                  src="https://images.unsplash.com/photo-1600596542815-3ad19fb812a7?auto=format&fit=crop&q=80&w=1200"
                  class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                  alt="Luxury Villa"
                />
                <!-- Gradient Overlay -->
                <div
                  class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-90"
                ></div>

                <!-- Badges -->
                <div class="absolute top-5 left-5 flex gap-2">
                  <span
                    class="px-3 py-1 bg-white/20 backdrop-blur-md text-white text-[10px] font-bold uppercase tracking-wider rounded-full border border-white/20"
                    >Verified</span
                  >
                  <span
                    class="px-3 py-1 bg-mac-accent/90 backdrop-blur-md text-white text-[10px] font-bold uppercase tracking-wider rounded-full shadow-lg shadow-blue-500/30"
                    >Superhost</span
                  >
                </div>

                <!-- Content -->
                <div class="absolute bottom-6 left-6 right-6 text-white">
                  <div class="flex justify-between items-end">
                    <div>
                      <h3 class="text-2xl md:text-3xl font-bold mb-1">
                        The Grand Gulshan
                      </h3>
                      <p
                        class="text-gray-300 font-medium flex items-center gap-1.5"
                      >
                        <i data-lucide="map-pin" class="w-4 h-4"></i> Gulshan 2,
                        Road 74
                      </p>
                    </div>
                    <div
                      class="text-right glass-dark px-4 py-2 rounded-2xl border border-white/10"
                    >
                      <p class="text-xs text-gray-300 uppercase tracking-wide">
                        Rent
                      </p>
                      <p class="text-xl font-bold">৳ 85,000</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Featured Card 2 -->
            <div
              class="min-w-[85%] md:min-w-[500px] snap-center relative group cursor-pointer tap-active"
              onclick="openModal(3)"
            >
              <div
                class="aspect-[16/9] rounded-[2rem] overflow-hidden shadow-soft group-hover:shadow-float transition-all duration-500 relative bg-gray-200"
              >
                <img
                  src="https://images.unsplash.com/photo-1512918760383-eda2723ad6e1?auto=format&fit=crop&q=80&w=1200"
                  class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"
                  alt="Penthouse"
                />
                <div
                  class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-90"
                ></div>
                <div class="absolute top-5 left-5 flex gap-2">
                  <span
                    class="px-3 py-1 bg-white/20 backdrop-blur-md text-white text-[10px] font-bold uppercase tracking-wider rounded-full border border-white/20"
                    >Rare Find</span
                  >
                </div>
                <div class="absolute bottom-6 left-6 right-6 text-white">
                  <div class="flex justify-between items-end">
                    <div>
                      <h3 class="text-2xl md:text-3xl font-bold mb-1">
                        Banani Lakeview
                      </h3>
                      <p
                        class="text-gray-300 font-medium flex items-center gap-1.5"
                      >
                        <i data-lucide="map-pin" class="w-4 h-4"></i> Banani,
                        Road 11
                      </p>
                    </div>
                    <div
                      class="text-right glass-dark px-4 py-2 rounded-2xl border border-white/10"
                    >
                      <p class="text-xs text-gray-300 uppercase tracking-wide">
                        Sublet
                      </p>
                      <p class="text-xl font-bold">৳ 25,000</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- List Grid Title -->
        <div
          class="flex items-center justify-between mb-6 mt-2 fade-in-up"
          style="animation-delay: 200ms;"
        >
          <h2 class="text-xl md:text-2xl font-bold text-gray-900">
            New Listings
          </h2>
          <div
            class="flex items-center gap-3 text-sm font-medium text-mac-secondary bg-white px-3 py-1.5 rounded-lg shadow-sm cursor-pointer border border-gray-100"
          >
            <span>Sort by: Recommended</span>
            <i data-lucide="chevron-down" class="w-4 h-4"></i>
          </div>
        </div>

        <!-- Grid Container -->
        <div
          class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 fade-in-up"
          style="animation-delay: 250ms;"
          id="listings-grid"
        >
          <!-- JS Injected -->
        </div>
      </div>
    </main>

    <!-- MOBILE: Bottom Nav -->
    <nav
      class="md:hidden fixed bottom-0 w-full glass border-t border-gray-200/50 pb-safe z-50"
    >
      <div class="flex justify-around items-center h-16 pb-2 px-2">
        <button
          class="flex flex-col items-center gap-1 w-14 text-mac-accent transition-transform active:scale-90"
          onclick="switchTab(this, 'home')"
        >
          <i data-lucide="compass" class="w-6 h-6 stroke-[2]"></i>
          <span class="text-[10px] font-semibold">Explore</span>
        </button>
        <button
          class="flex flex-col items-center gap-1 w-14 text-gray-400 hover:text-gray-600 transition-transform active:scale-90"
          onclick="switchTab(this, 'map')"
        >
          <i data-lucide="map" class="w-6 h-6 stroke-[2]"></i>
          <span class="text-[10px] font-medium">Map</span>
        </button>
        <div class="relative -top-5">
          <button
            class="w-14 h-14 bg-mac-accent text-white rounded-full shadow-lg shadow-blue-500/40 flex items-center justify-center transform hover:scale-105 transition active:scale-95"
          >
            <i data-lucide="plus" class="w-7 h-7"></i>
          </button>
        </div>
        <button
          class="flex flex-col items-center gap-1 w-14 text-gray-400 hover:text-gray-600 transition-transform active:scale-90"
          onclick="switchTab(this, 'chat')"
        >
          <div class="relative">
            <i data-lucide="message-circle" class="w-6 h-6 stroke-[2]"></i>
            <span
              class="absolute -top-1 -right-1 w-2.5 h-2.5 bg-mac-danger rounded-full border-2 border-white"
            ></span>
          </div>
          <span class="text-[10px] font-medium">Chat</span>
        </button>
        <button
          class="flex flex-col items-center gap-1 w-14 text-gray-400 hover:text-gray-600 transition-transform active:scale-90"
          onclick="switchTab(this, 'profile')"
        >
          <i data-lucide="user" class="w-6 h-6 stroke-[2]"></i>
          <span class="text-[10px] font-medium">Profile</span>
        </button>
      </div>
    </nav>

    <!-- PREMIUM MODAL OVERLAY -->
    <div id="modal-overlay" class="fixed inset-0 z-[60] hidden">
      <!-- Backdrop -->
      <div
        class="absolute inset-0 bg-gray-900/40 backdrop-blur-md transition-opacity duration-500 opacity-0"
        id="modal-backdrop"
        onclick="closeModal()"
      ></div>

      <!-- Modal Card -->
      <div
        class="absolute inset-x-0 bottom-0 md:inset-0 md:flex md:items-center md:justify-center pointer-events-none"
      >
        <div
          id="modal-card"
          class="bg-mac-bg w-full md:w-[900px] md:h-[85vh] h-[92vh] md:rounded-3xl rounded-t-3xl shadow-2xl overflow-hidden transform translate-y-full md:translate-y-10 md:opacity-0 transition-all duration-500 cubic-bezier(0.32, 0.72, 0, 1) pointer-events-auto flex flex-col md:flex-row"
        >
          <!-- Close Button (Mobile) -->
          <button
            onclick="closeModal()"
            class="md:hidden absolute top-4 right-4 z-20 w-8 h-8 bg-black/20 backdrop-blur-md rounded-full text-white flex items-center justify-center"
          >
            <i data-lucide="x" class="w-5 h-5"></i>
          </button>

          <!-- Left: Image Gallery (Desktop 50%, Mobile 35% height) -->
          <div
            class="w-full md:w-1/2 h-[35vh] md:h-full relative bg-gray-200 group"
          >
            <img
              id="m-image"
              src=""
              class="w-full h-full object-cover"
              alt="Detail"
            />
            <div
              class="absolute inset-0 bg-gradient-to-b from-black/30 to-transparent md:bg-none"
            ></div>

            <!-- Desktop Gallery Controls -->
            <div
              class="hidden md:flex absolute bottom-6 left-1/2 -translate-x-1/2 gap-2"
            >
              <div class="w-2 h-2 rounded-full bg-white shadow-sm"></div>
              <div class="w-2 h-2 rounded-full bg-white/50 shadow-sm"></div>
              <div class="w-2 h-2 rounded-full bg-white/50 shadow-sm"></div>
            </div>
          </div>

          <!-- Right: Content Scroll -->
          <div class="w-full md:w-1/2 h-full flex flex-col bg-white relative">
            <!-- Desktop Close -->
            <button
              onclick="closeModal()"
              class="hidden md:flex absolute top-6 right-6 z-10 w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full text-gray-500 items-center justify-center transition"
            >
              <i data-lucide="x" class="w-5 h-5"></i>
            </button>

            <div class="flex-1 overflow-y-auto p-6 md:p-8 no-scrollbar">
              <!-- Header -->
              <div class="mb-6">
                <span
                  id="m-type"
                  class="text-mac-accent font-bold text-xs uppercase tracking-wider mb-2 block"
                  >Apartment</span
                >
                <h2
                  id="m-title"
                  class="text-3xl font-bold text-gray-900 leading-tight mb-2"
                >
                  Title
                </h2>
                <p class="text-mac-secondary flex items-center gap-1.5 text-sm">
                  <i data-lucide="map-pin" class="w-4 h-4"></i>
                  <span id="m-loc">Location</span>
                </p>
              </div>

              <!-- Price Tag -->
              <div
                class="flex items-center justify-between p-4 bg-mac-bg rounded-2xl border border-gray-100 mb-8"
              >
                <div>
                  <p class="text-xs text-mac-secondary uppercase font-semibold">
                    Monthly Rent
                  </p>
                  <div class="flex items-baseline gap-1">
                    <span class="text-2xl font-bold text-gray-900" id="m-price"
                      >৳ 0</span
                    >
                  </div>
                </div>
                <div class="h-10 w-[1px] bg-gray-300"></div>
                <div class="text-right">
                  <p class="text-xs text-mac-secondary uppercase font-semibold">
                    Service Charge
                  </p>
                  <span class="text-sm font-medium text-gray-900"
                    >Included</span
                  >
                </div>
              </div>

              <!-- Key Stats -->
              <div class="grid grid-cols-3 gap-3 mb-8">
                <div
                  class="p-3 border border-gray-100 rounded-2xl flex flex-col items-center justify-center text-center bg-white shadow-sm"
                >
                  <i
                    data-lucide="bed-double"
                    class="w-6 h-6 text-gray-400 mb-1"
                  ></i>
                  <span id="m-beds" class="font-bold text-gray-900 text-sm"
                    >2 Beds</span
                  >
                </div>
                <div
                  class="p-3 border border-gray-100 rounded-2xl flex flex-col items-center justify-center text-center bg-white shadow-sm"
                >
                  <i data-lucide="bath" class="w-6 h-6 text-gray-400 mb-1"></i>
                  <span id="m-baths" class="font-bold text-gray-900 text-sm"
                    >2 Baths</span
                  >
                </div>
                <div
                  class="p-3 border border-gray-100 rounded-2xl flex flex-col items-center justify-center text-center bg-white shadow-sm"
                >
                  <i
                    data-lucide="maximize"
                    class="w-6 h-6 text-gray-400 mb-1"
                  ></i>
                  <span class="font-bold text-gray-900 text-sm">1250 sqft</span>
                </div>
              </div>

              <!-- Info Section -->
              <h3 class="font-bold text-lg mb-3">About this home</h3>
              <p
                id="m-desc"
                class="text-mac-secondary text-sm leading-relaxed mb-6"
              >
                Description...
              </p>

              <!-- Amenities -->
              <h3 class="font-bold text-lg mb-3">Amenities</h3>
              <div id="m-amenities" class="flex flex-wrap gap-2 mb-8">
                <!-- JS -->
              </div>

              <!-- Landlord Mini Profile -->
              <div
                class="flex items-center gap-4 p-4 border border-gray-100 rounded-2xl mb-8"
              >
                <img
                  src="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?auto=format&fit=crop&q=80&w=100"
                  class="w-12 h-12 rounded-full object-cover"
                />
                <div>
                  <p class="font-bold text-sm text-gray-900">
                    Hosted by Rahman
                  </p>
                  <p class="text-xs text-gray-500">
                    Joined 2021 • Response rate: 98%
                  </p>
                </div>
                <button
                  class="ml-auto p-2 bg-gray-100 rounded-full hover:bg-gray-200 transition"
                >
                  <i
                    data-lucide="message-circle"
                    class="w-5 h-5 text-gray-600"
                  ></i>
                </button>
              </div>

              <!-- Extra Padding for scroll -->
              <div class="h-20"></div>
            </div>

            <!-- Sticky Bottom Action (Mobile & Desktop) -->
            <div
              class="absolute bottom-0 left-0 right-0 p-5 bg-white/90 backdrop-blur-xl border-t border-gray-100 flex gap-4"
            >
              <button
                class="flex-1 bg-gray-900 text-white font-bold py-4 rounded-2xl shadow-lg hover:bg-black transition transform active:scale-[0.98]"
              >
                Request Booking
              </button>
              <button
                class="w-14 bg-gray-100 rounded-2xl flex items-center justify-center hover:bg-gray-200 transition text-gray-900"
                onclick="toggleSave(this)"
              >
                <i data-lucide="heart" class="w-6 h-6"></i>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Notification Toast -->
    <div
      id="toast"
      class="fixed top-8 left-1/2 -translate-x-1/2 z-[100] bg-white/80 backdrop-blur-xl shadow-float px-6 py-3 rounded-full flex items-center gap-3 transform -translate-y-32 transition-all duration-500 border border-white/50"
    >
      <div
        class="w-5 h-5 rounded-full bg-mac-success flex items-center justify-center text-white"
      >
        <i data-lucide="check" class="w-3 h-3 stroke-[3]"></i>
      </div>
      <span class="text-sm font-semibold text-gray-900" id="toast-msg"
        >Saved to favorites</span
      >
    </div>

    <script>
      // --- Data Model ---
      const categories = [
        { id: "all", name: "All Stays" },
        { id: "flat", name: "Family Flats" },
        { id: "mess", name: "Bachelor Mess" },
        { id: "sublet", name: "Luxury Sublets" },
        { id: "hostel", name: "Hostels" },
        { id: "office", name: "Office Space" },
      ];

      const properties = [
        {
          id: 1,
          title: "The Grand Gulshan",
          location: "Gulshan 2, Dhaka",
          price: 85000,
          type: "flat",
          beds: 3,
          baths: 4,
          sqft: 2200,
          image:
            "https://images.unsplash.com/photo-1600596542815-3ad19fb812a7?auto=format&fit=crop&q=80&w=800",
          amenities: ["Generator", "Gym", "Concierge", "Parking", "CCTV"],
          desc:
            "Experience the pinnacle of luxury in this 2200sqft apartment overlooking the lake. Features imported marble flooring, central AC, and a dedicated concierge service.",
          verified: true,
        },
        {
          id: 2,
          title: "Minimalist Student Hub",
          location: "Bashundhara R/A",
          price: 8500,
          type: "mess",
          beds: 1,
          baths: 1,
          sqft: 150,
          image:
            "https://images.unsplash.com/photo-1555854877-bab0e564b8d5?auto=format&fit=crop&q=80&w=800",
          amenities: ["High-Speed WiFi", "Meal Plan", "Study Desk", "Cleaning"],
          desc:
            "A focused environment for students. Single room with attached bath in a quiet block of Bashundhara. 5 mins from NSU.",
          verified: false,
        },
        {
          id: 3,
          title: "Banani Lakeview Loft",
          location: "Banani, Road 11",
          price: 25000,
          type: "sublet",
          beds: 1,
          baths: 1,
          sqft: 450,
          image:
            "https://images.unsplash.com/photo-1512918760383-eda2723ad6e1?auto=format&fit=crop&q=80&w=800",
          amenities: ["Smart TV", "Kitchenette", "Balcony", "Laundry"],
          desc:
            "Perfect for expats or corporate travellers. This studio sublet offers a stunning view of Banani Lake and is walking distance to top restaurants.",
          verified: true,
        },
        {
          id: 4,
          title: "Mirpur Green Heights",
          location: "Mirpur DOHS",
          price: 32000,
          type: "flat",
          beds: 3,
          baths: 3,
          sqft: 1400,
          image:
            "https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?auto=format&fit=crop&q=80&w=800",
          amenities: ["Gated Community", "Park View", "Gas Line", "Lift"],
          desc:
            "Secure living in DOHS. This 3rd floor apartment is naturally lit and airy. Access to DOHS playground and jogging track.",
          verified: true,
        },
        {
          id: 5,
          title: "Cozy Corner Seat",
          location: "Farmgate",
          price: 4000,
          type: "hostel",
          beds: 1,
          baths: 4, // shared
          sqft: 80,
          image:
            "https://images.unsplash.com/photo-1595526114035-0d45ed16cfbf?auto=format&fit=crop&q=80&w=800",
          amenities: ["Shared Kitchen", "Filter Water", "Security"],
          desc:
            "Budget friendly seat in a shared room. Very close to coaching centers and Metro Rail station.",
          verified: false,
        },
        {
          id: 6,
          title: "Dhanmondi Heritage",
          location: "Dhanmondi 8/A",
          price: 55000,
          type: "flat",
          beds: 4,
          baths: 4,
          sqft: 2000,
          image:
            "https://images.unsplash.com/photo-1493809842364-78817add7ffb?auto=format&fit=crop&q=80&w=800",
          amenities: ["Rooftop Garden", "2 Car Parking", "Elevator"],
          desc:
            "Classic Dhanmondi living. Spacious rooms with mosaic floors and large balconies. Near Rabindra Sarobar.",
          verified: true,
        },
      ];

      let activeCategory = "all";

      // --- Render Logic ---
      function init() {
        lucide.createIcons();
        renderCategories();
        renderGrid(properties);
      }

      function renderCategories() {
        const container = document.getElementById("categories-container");
        container.innerHTML = categories
          .map(
            (cat) => `
                <button onclick="setCategory('${cat.id}')" 
                    class="px-5 py-2.5 rounded-full text-sm font-bold transition-all duration-300 whitespace-nowrap tap-active
                    ${
                      activeCategory === cat.id
                        ? "bg-gray-900 text-white shadow-lg"
                        : "bg-white text-gray-500 hover:bg-gray-100 hover:text-gray-900 border border-gray-100 shadow-sm"
                    }">
                    ${cat.name}
                </button>
            `
          )
          .join("");
      }

      function renderGrid(data) {
        const grid = document.getElementById("listings-grid");
        grid.innerHTML = data
          .map(
            (item, idx) => `
                <div class="group bg-white rounded-3xl p-3 shadow-soft hover:shadow-float transition-all duration-300 cursor-pointer tap-active border border-gray-100/50 flex flex-col h-full"
                     onclick="openModal(${item.id})">
                    
                    <!-- Image Container -->
                    <div class="relative aspect-[4/3] rounded-2xl overflow-hidden mb-3 bg-gray-100">
                        <img src="${
                          item.image
                        }" loading="lazy" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" alt="${
              item.title
            }">
                        
                        <!-- Favorite Button -->
                        <button onclick="event.stopPropagation(); toggleSave(this)" class="absolute top-3 right-3 w-9 h-9 rounded-full bg-white/60 backdrop-blur-md flex items-center justify-center hover:bg-white transition text-gray-700 hover:text-red-500">
                            <i data-lucide="heart" class="w-5 h-5 transition-colors"></i>
                        </button>

                        ${
                          item.verified
                            ? `
                            <div class="absolute bottom-3 left-3 bg-white/90 backdrop-blur px-2 py-1 rounded-lg flex items-center gap-1 shadow-sm">
                                <i data-lucide="shield-check" class="w-3 h-3 text-mac-accent"></i>
                                <span class="text-[10px] font-bold uppercase tracking-wider text-gray-800">Verified</span>
                            </div>
                        `
                            : ""
                        }
                    </div>

                    <!-- Content -->
                    <div class="px-1 flex flex-col flex-1">
                        <div class="flex justify-between items-start mb-1">
                            <h3 class="font-bold text-lg text-gray-900 line-clamp-1 group-hover:text-mac-accent transition-colors">${
                              item.title
                            }</h3>
                            <div class="flex items-center gap-1 shrink-0">
                                <i data-lucide="star" class="w-3.5 h-3.5 fill-yellow-400 text-yellow-400"></i>
                                <span class="text-xs font-bold">4.8</span>
                            </div>
                        </div>
                        
                        <p class="text-sm text-gray-500 mb-3 flex items-center gap-1">
                            <i data-lucide="map-pin" class="w-3.5 h-3.5"></i> ${
                              item.location
                            }
                        </p>

                        <div class="mt-auto pt-3 border-t border-gray-100 flex items-end justify-between">
                            <div>
                                <span class="text-xl font-extrabold text-gray-900">৳ ${item.price.toLocaleString()}</span>
                                <span class="text-xs text-gray-400 font-medium">/mo</span>
                            </div>
                            <div class="flex gap-2 text-gray-400">
                                <span class="text-xs font-medium flex items-center gap-1 bg-gray-50 px-2 py-1 rounded-md">
                                    <i data-lucide="bed" class="w-3 h-3"></i> ${
                                      item.beds
                                    }
                                </span>
                                <span class="text-xs font-medium flex items-center gap-1 bg-gray-50 px-2 py-1 rounded-md">
                                    <i data-lucide="bath" class="w-3 h-3"></i> ${
                                      item.baths
                                    }
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            `
          )
          .join("");
        lucide.createIcons();
      }

      // --- Controller ---
      function setCategory(id) {
        activeCategory = id;
        renderCategories();

        // Filter logic
        const filtered =
          id === "all" ? properties : properties.filter((p) => p.type === id);

        renderGrid(filtered);
      }

      // --- Interaction Logic ---
      function toggleSave(btn) {
        const icon = btn.querySelector("i");
        const isSaved = icon.classList.contains("fill-red-500");

        if (isSaved) {
          icon.classList.remove("fill-red-500", "text-red-500");
          showToast("Removed from favorites");
        } else {
          icon.classList.add("fill-red-500", "text-red-500");
          // Pulse effect
          btn.style.transform = "scale(1.2)";
          setTimeout(() => (btn.style.transform = "scale(1)"), 200);
          showToast("Added to favorites");
        }
      }

      function showToast(msg) {
        const t = document.getElementById("toast");
        document.getElementById("toast-msg").innerText = msg;
        t.classList.remove("-translate-y-32");
        t.classList.add("translate-y-0");

        setTimeout(() => {
          t.classList.add("-translate-y-32");
          t.classList.remove("translate-y-0");
        }, 2500);
      }

      // --- Modal System ---
      function openModal(id) {
        // Find data
        const item =
          typeof id === "object" ? id : properties.find((p) => p.id === id); // Handle explicit object or ID
        if (!item) return;

        // Fill Data
        document.getElementById("m-image").src = item.image;
        document.getElementById("m-type").innerText = item.type;
        document.getElementById("m-title").innerText = item.title;
        document.getElementById("m-loc").innerText = item.location;
        document.getElementById(
          "m-price"
        ).innerText = `৳ ${item.price.toLocaleString()}`;
        document.getElementById("m-beds").innerText = `${item.beds} Beds`;
        document.getElementById("m-baths").innerText = `${item.baths} Baths`;
        document.getElementById("m-desc").innerText = item.desc;

        const amContainer = document.getElementById("m-amenities");
        amContainer.innerHTML = item.amenities
          .map(
            (a) => `
                <span class="px-3 py-1.5 bg-gray-50 border border-gray-100 rounded-lg text-xs font-semibold text-gray-600">${a}</span>
            `
          )
          .join("");

        // Animations
        const overlay = document.getElementById("modal-overlay");
        const backdrop = document.getElementById("modal-backdrop");
        const card = document.getElementById("modal-card");

        overlay.classList.remove("hidden");
        // Force Reflow
        void overlay.offsetWidth;

        backdrop.classList.remove("opacity-0");

        // Remove translate, opacity changes
        card.classList.remove(
          "translate-y-full",
          "md:translate-y-10",
          "md:opacity-0"
        );

        document.body.style.overflow = "hidden";
        lucide.createIcons();
      }

      function closeModal() {
        const overlay = document.getElementById("modal-overlay");
        const backdrop = document.getElementById("modal-backdrop");
        const card = document.getElementById("modal-card");

        backdrop.classList.add("opacity-0");
        card.classList.add(
          "translate-y-full",
          "md:translate-y-10",
          "md:opacity-0"
        );

        setTimeout(() => {
          overlay.classList.add("hidden");
          document.body.style.overflow = "auto";
        }, 500);
      }

      // --- Nav Switching (Mobile) ---
      function switchTab(btn, target) {
        // Reset state
        const buttons = btn.parentElement.querySelectorAll("button");
        buttons.forEach((b) => {
          b.classList.remove("text-mac-accent");
          b.classList.add("text-gray-400");
          const i = b.querySelector("i");
          // if(i) i.setAttribute('stroke-width', '2');
        });

        // Set Active
        btn.classList.remove("text-gray-400");
        btn.classList.add("text-mac-accent");

        // Simple logic for demo
        if (target === "home") {
          document
            .getElementById("main-scroll")
            .scrollTo({ top: 0, behavior: "smooth" });
        }
      }

      // Init
      window.addEventListener("DOMContentLoaded", init);
    </script>
  </body>
</html>
